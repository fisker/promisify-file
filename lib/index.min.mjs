function r(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}var e=Object.defineProperties;function n(r,n){for(var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{configurable:!0,writable:!0,enumerable:!0},a={},i=Object.keys(n),u=0;u<i.length;u++){var c=i[u];a[c]=t({value:n[c]},o)}return e(r,a)}var o=new Function("return this")(),a=o.URL||o.webkitURL,i=o.ArrayBuffer,u=o.atob,c=o.Blob,f=o.createImageBitmap,l=o.DataView,s=o.DOMParser,v=o.document,h=o.fetch,y=o.File,d=o.Image,p=o.OffscreenCanvas,m=(o.Promise,o.Int8Array),g=o.Uint8Array,b=o.Uint8ClampedArray,w=o.Int16Array,A=o.Uint16Array,P=o.Int32Array,x=o.Uint32Array,B=o.Float32Array,j=o.Float64Array,L=o.XMLSerializer;function S(r){return"function"==typeof r}function O(r){return null!==r&&("object"==typeof r||S(r))}var E=function(){try{return O(new y([],""))}catch(r){return!1}}(),M=S(p),T=function(){try{var r=new i,t=new l(r);return O(new c([t]))}catch(r){return!1}}();var U=E?function(r,t,e){return new y(r,t,e)}:function(r,t,e){var n=new c(r,e);return n.name=t,n.lastModified=e.lastModified||Date.now(),n};function R(r){return t=function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.call.apply(r,[t].concat(n))},function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{return Promise.resolve(t.apply(this,r))}catch(r){return Promise.reject(r)}};var t}function C(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.$store.blob;return r=t({},e,r),new c([e],r)}var D=R(C),$="application/xml",I="image/svg+xml",F="text/html",H={none:"",text:"text",json:"json",document:"document"},X="end",q="UTF-8",k="error occurred during loading image",z="XMLHttpRequest timeout",N="error occurred during XMLHttpRequest";function W(r,t){for(var e=arguments.length,n=new Array(e>2?e-2:0),o=2;o<e;o++)n[o-2]=arguments[o];return function(){for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];var i=r===X?[].concat(o,n):[].concat(n,o);return t.apply(this,i)}}var J=W.bind(null,"start")(W,X);function V(r,t){var e=(new s).parseFromString(r,t);return function(r){var t=r.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.innerText||t.textContent)}(e),e}var G=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(r.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(r,t){var e,n,o;return r=r||this.$options.encoding,t=t||this.$store.blob.type,e=this.text(r),n=function(r){return V(r,t)},o?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e)}),K=J(G,$),Q=J(G,I),Y=J(G,F),Z=new Function("return this")(),_=Z.FileReader,rr=Z.Promise,tr=Array.prototype.slice,er=["ArrayBuffer","Text","DataURL","BinaryString"];function nr(r){var t=tr.call(arguments,1);return new rr(function(e,n){var o=new _;o.addEventListener("load",function(){return e(o.result)}),o.addEventListener("error",function(){return n(o.error)}),r.apply(o,t)})}function or(){}for(var ar=0;ar<er.length;ar++){var ir="readAs".concat(er[ar]),ur=nr.bind(null,_.prototype[ir]);or.prototype[ir]=ur,or[ir]=ur}var cr={arrayBuffer:or.readAsArrayBuffer,text:or.readAsText,dataURL:or.readAsDataURL,binaryString:or.readAsBinaryString};function fr(r){var t=cr[r];return function(e){e=String(e||this.$options.encoding||q).toUpperCase();var n="text"===r?r:"".concat(r,".").concat(e),o=this.$store;return o[n]||(o[n]=t(o.blob,e)),o[n]}}var lr=fr("arrayBuffer"),sr=fr("text"),vr=fr("dataURL"),hr=fr("binaryString");function yr(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.$store.blob;return r=r||n.name,e=t({},n,e),U([n],r,e)}var dr=R(yr);function pr(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return f.apply(void 0,[this.$store.blob].concat(t))}var mr=R(pr);var gr=M?function(r,t){return new p(r,t).getContext("2d")}:function(r,t){var e=v.createElement("canvas");return e.width=r,e.height=t,e.getContext("2d")};function br(r){var t=gr(r.naturalWidth||r.width,r.naturalHeight||r.height);return t.drawImage(r,0,0),t}var wr=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(r.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(r,t,e,n){var o,a,i;return o=this.image(),a=function(o){return function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.naturalWidth||r.width,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.naturalHeight||r.height;return br(r).getImageData(t,e,n,o)}(o,r,t,e,n)},i?a?a(o):o:(o&&o.then||(o=Promise.resolve(o)),a?o.then(a):o)});function Ar(r){return function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return new Promise(function(e,o){var a=r.call.apply(r,[t,e,o].concat(n));void 0!==a&&e(a)})}}function Pr(r,t,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r.addEventListener(t,e,n)}var xr=Ar(function(r,t,e){if(e.naturalWidth)return r(e);Pr(e,"load",function(){r(e)}),Pr(e,"error",function(){t(new Error(k))})});function Br(r){var t=new d;return t.src=r,xr(t)}var jr=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(r.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(){var r,t,e;return r=this.url(),t=Br,e?t?t(r):r:(r&&r.then||(r=Promise.resolve(r)),t?r.then(t):r)});var Lr=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(r.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(r,t){var e,n,o;return e=this.text(r||this.$options.encoding),n=function(r){return JSON.parse(r,t)},o?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e)});function Sr(r){return t=function(t,e,n){var o,a,i;return o=this.arrayBuffer(),a=function(t){return new r(t,e,n)},i?a?a(o):o:(o&&o.then||(o=Promise.resolve(o)),a?o.then(a):o)},function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{return Promise.resolve(t.apply(this,r))}catch(r){return Promise.reject(r)}};var t}var Or=Sr(l),Er=Sr(B),Mr=Sr(j),Tr=Sr(w),Ur=Sr(P),Rr=Sr(m),Cr=Sr(A),Dr=Sr(x),$r=Sr(g),Ir=Sr(b);function Fr(){return a.createObjectURL(this.$store.blob)}var Hr=R(Fr),Xr=Object.freeze({blob:D,blobSync:C,document:G,xml:K,svg:Q,html:Y,arrayBuffer:lr,text:sr,dataURL:vr,binaryString:hr,fileSync:yr,file:dr,imageBitmap:mr,imageBitmapSync:pr,imageData:wr,image:jr,json:Lr,dataView:Or,float32Array:Er,float64Array:Mr,int16Array:Tr,int32Array:Ur,int8Array:Rr,uint16Array:Cr,uint32Array:Dr,uint8Array:$r,uint8ClampedArray:Ir,url:Hr,urlSync:Fr}),qr=function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=t,o=e.type||t.type,a=e.name||t.name,i=e.lastModified||t.lastModified;o===t.type&&a===t.name&&i===t.lastModified||(n=a?U([t],a,{type:o,lastModified:i}):new c([t],{type:o})),this.$store={original:t,blob:n},this.$options=e};function kr(r){return O(r)&&S(r.then)}n(qr.prototype,Xr);var zr=Object.prototype.toString;function Nr(r){return zr.call(r).slice(8,-1)}function Wr(r){switch(r.responseType){case H.none:case H.text:return r.responseText;case H.json:return JSON.stringify(r.response);case H.document:return r.responseXML;default:return r.response}}var Jr=Ar(function(r,t,e){4!==e.readyState?(Pr(e,"load",function(){r(Wr(e))}),Pr(e,"error",function(){t(new Error(N))}),Pr(e,"timeout",function(){t(new Error(z))})):r(Wr(e))});var Vr=Ar(function(r,t,e){return e.result?r(e.result):e.error?t(e.error):(Pr(e,"load",function(){r(e.result)}),void Pr(e,"error",function(){t(e.error)}))});function Gr(r,t){var e=u(r.split(",")[1]),n=g.from(e,function(r){return r.charCodeAt(0)});return new c([n],{type:t})}var Kr=Ar(function(r,t,e,n,o){return e.toBlob?e.toBlob(r,n,o):e.convertToBlob?r(e.convertToBlob(n,o)):r(Gr(e.toDataURL(n,o)))});function Qr(r){return O(r)&&function(r){return O(r)&&S(r.getContext)}(r.canvas)}var Yr=/^data:(.*?)?;base64,(.+)$/;function Zr(r){return O(r)&&function(r){return O(r)&&"ArrayBuffer"===Nr(r)}(r.buffer)}function _r(r,t){var e=function(){return _r(t)};if(kr(r))return r.then(e);var n,o,a,i=Nr(r);if("Blob"===i||"File"===i)return r;if("XMLHttpRequest"===i)return Jr(r).then(e);if("HTMLImageElement"===i)return xr(r).then(br).then(e);if("ImageBitmap"===i)return e(br(r));if("ImageData"===i)return e(function(r){var t=gr(r.width,r.height);t.putImageData(r,0,0)}(r));if("FileReader"===i)return Vr(r).then(e);if(O(n=r)&&S(n.arrayBuffer)&&S(n.blob)&&S(n.formData)&&S(n.json)&&S(n.text))return r.blob();if(function(r){return O(r)&&O(r.documentElement)&&S(r.createElement)}(r))return e((o=r).documentElement.outerHTML||(new L).serializeToString(o));if("HTMLCanvasElement"===i)return Kr(r,t.type,t.quality);if("OffscreenCanvas"===i)return r.convertToBlob(t);if(Qr(r))return e(r.canvas);if(a=r,Yr.test(a))try{var u=Gr(r);if(u)return u}catch(r){}return/^(?:blob|data):/.test(r)?h(r).then(e):!T&&Zr(r)?e(r.buffer):new c([r],t)}function rt(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=_r(r,t);return(kr(e)?e:Promise.resolve(e)).then(function(){return new qr(e,t)})}n(qr,{from:rt});export default qr;export{rt as from};
//# sourceMappingURL=index.min.mjs.map
