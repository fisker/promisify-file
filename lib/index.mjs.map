{"version":3,"file":"index.mjs","sources":["../src/utils/define-values.js","../src/utils/global-this.js","../src/utils/is-function.js","../src/utils/is-object.js","../src/supports.js","../src/utils/construct-file.js","../src/utils/get-type.js","../src/utils/is-blob.js","../src/constants.js","../src/utils/async.js","../src/core/prototype/blob.js","../src/utils/throw-dom-parser-error.js","../src/utils/text-to-document.js","../src/utils/is-null.js","../src/utils/has-own.js","../src/core/helper/cache-result.js","../src/core/prototype/dom-parser.js","../node_modules/promisify-file-reader/dist/index.min.mjs","../src/core/prototype/file-reader.js","../src/core/prototype/file.js","../src/core/prototype/image-bitmap.js","../src/utils/get-rendering-context.js","../src/utils/draw-image.js","../src/utils/get-image-data.js","../src/core/prototype/image-data.js","../src/utils/is-undefined.js","../src/utils/promisify.js","../src/utils/on.js","../src/utils/wait-for-image.js","../src/utils/load-image.js","../src/core/prototype/image.js","../src/core/prototype/json.js","../src/core/prototype/typed-array.js","../src/core/prototype/url.js","../src/core/file.js","../src/utils/is-then-able.js","../src/utils/parse-xmlhttp-request-data.js","../src/utils/wait-for-xmlhttp-request.js","../src/utils/wait-for-file-reader.js","../src/utils/put-image-data.js","../src/utils/is-body.js","../src/utils/is-document.js","../src/utils/document-to-text.js","../src/utils/data-url-to-blob.js","../src/utils/canvas-to-blob.js","../src/utils/is-canvas.js","../src/utils/is-rendering-context.js","../src/utils/is-data-url.js","../src/utils/download.js","../src/utils/is-array-buffer.js","../src/utils/is-data-view.js","../src/core/from.js","../src/index.js"],"sourcesContent":["const {defineProperties} = Object\n\nfunction defineValues(object, values, options) {\n  const {configurable, writable, enumerable} = {\n    configurable: true,\n    writable: true,\n    enumerable: true,\n    ...options,\n  }\n\n  const properties = {}\n  const keys = Object.keys(values)\n\n  for (const key of keys) {\n    properties[key] = {\n      value: values[key],\n      configurable,\n      writable,\n      enumerable,\n    }\n  }\n\n  return defineProperties(object, properties)\n}\n\nexport default defineValues\n","// eslint-disable-next-line no-new-func\nconst globalThis = new Function('return this')()\n\nconst URL = globalThis.URL || globalThis.webkitURL\nconst {\n  ArrayBuffer,\n  atob,\n  Blob,\n  createImageBitmap,\n  DataView,\n  DOMParser,\n  document,\n  fetch,\n  File,\n  Image,\n  OffscreenCanvas,\n  Promise,\n  Int8Array,\n  Uint8Array,\n  Uint8ClampedArray,\n  Int16Array,\n  Uint16Array,\n  Int32Array,\n  Uint32Array,\n  Float32Array,\n  Float64Array,\n  XMLSerializer,\n} = globalThis\n\nexport default globalThis\n\nexport {\n  ArrayBuffer,\n  atob,\n  Blob,\n  createImageBitmap,\n  DataView,\n  DOMParser,\n  document,\n  fetch,\n  File,\n  Image,\n  OffscreenCanvas,\n  Promise,\n  URL,\n  Int8Array,\n  Uint8Array,\n  Uint8ClampedArray,\n  Int16Array,\n  Uint16Array,\n  Int32Array,\n  Uint32Array,\n  Float32Array,\n  Float64Array,\n  XMLSerializer,\n}\n","function isFunction(x) {\n  return typeof x === 'function'\n}\n\nexport default isFunction\n","import isFunction from './is-function.js'\n\nfunction isObject(x) {\n  return x !== null && (typeof x === 'object' || isFunction(x))\n}\n\nexport default isObject\n","import {\n  File,\n  OffscreenCanvas,\n  ArrayBuffer,\n  DataView,\n  Blob,\n  URL,\n} from './utils/global-this.js'\nimport isObject from './utils/is-object.js'\nimport isFunction from './utils/is-function.js'\n\n// IE don't support File Constructor\nexport const SUPPORTS_FILE_CONSTRUCTOR = (function () {\n  try {\n    const file = new File([], '')\n    return isObject(file)\n  } catch {\n    return false\n  }\n})()\n\nexport const SUPPORTS_OFFSCREEN_CANVAS = isFunction(OffscreenCanvas)\n\nexport const SUPPORTS_BLOB_CONSTRUCTOR_WITH_DATA_VIEW = (function () {\n  try {\n    const arrayBuffer = new ArrayBuffer()\n    const dataView = new DataView(arrayBuffer)\n    const blob = new Blob([dataView])\n    return isObject(blob)\n  } catch {\n    return false\n  }\n})()\n\nexport const SUPPORTS_URL_CREATE_OBJECT_URL =\n  isObject(URL) && isFunction(URL.createObjectURL)\n","import {SUPPORTS_FILE_CONSTRUCTOR} from '../supports.js'\nimport {File, Blob} from './global-this.js'\n\nfunction toFile(parts, fileName, options) {\n  return new File(parts, fileName, options)\n}\n\n// use Blob as as fake File\nfunction toBlob(parts, fileName, options) {\n  const blob = new Blob(parts, options)\n  blob.name = fileName\n  blob.lastModified = options.lastModified || Date.now()\n  return blob\n}\n\nexport default SUPPORTS_FILE_CONSTRUCTOR ? toFile : toBlob\n","const {toString} = Object.prototype\nfunction getType(x) {\n  return toString.call(x).slice(8, -1)\n}\nexport default getType\n","import getType from './get-type.js'\n\nfunction isBlob(x) {\n  const type = getType(x)\n\n  return type === 'Blob' || type === 'File'\n}\n\nexport default isBlob\n","export const DOMPARSER_TYPES = {\n  xml: 'application/xml',\n  svg: 'image/svg+xml',\n  html: 'text/html',\n}\n\nexport const XHR_RESPONSE_TYPES = {\n  none: '',\n  text: 'text',\n  json: 'json',\n  document: 'document',\n}\n\nexport const CURRY_SIDE_START = 'start'\nexport const CURRY_SIDE_END = 'end'\n\nexport const DEFAULT_TEXT_ENCODING = 'UTF-8'\n\nexport const IMAGE_LOAD_ERROR = 'error occurred during loading image'\nexport const XMLHTTP_TIMEOUT_ERROR = 'XMLHttpRequest timeout'\nexport const XMLHTTP_LOAD_ERROR = 'error occurred during XMLHttpRequest'\nexport const CONSTRUCTOR_DATA_TYPE_ERROR = '`data` except a `Blob`'\n","function toPromise(function_) {\n  return async function (...arguments_) {\n    return function_.call(this, ...arguments_)\n  }\n}\n\nexport default toPromise\n","import {Blob} from '../../utils/global-this.js'\nimport toPromise from '../../utils/async.js'\n\n// get `Blob`\nfunction blobSync(options = {}) {\n  const {blob} = this.$store\n  options = {\n    ...blob,\n    ...options,\n  }\n\n  return new Blob([blob], options)\n}\n\nconst blob = toPromise(blobSync)\n\nexport {blob, blobSync}\n","// DOMParser\nfunction throwParserError(document) {\n  const parserError = document.getElementsByTagName('parsererror')[0]\n\n  if (parserError) {\n    throw new Error(parserError.innerText || parserError.textContent)\n  }\n\n  return document\n}\n\nexport default throwParserError\n","import {DOMParser} from './global-this.js'\nimport throwParserError from './throw-dom-parser-error.js'\n\nfunction textToDocument(text, mimeType) {\n  const parser = new DOMParser()\n  const document = parser.parseFromString(text, mimeType)\n  throwParserError(document)\n  return document\n}\n\nexport default textToDocument\n","function isNull(x) {\n  return x === null\n}\n\nexport default isNull\n","import isNull from './is-null.js'\n\nconst {hasOwnProperty} = Object.prototype\n\nfunction hasOwn(object, key) {\n  return !isNull(object) && hasOwnProperty.call(object, key)\n}\n\nexport default hasOwn\n","import hasOwn from '../../utils/has-own.js'\nimport isFunction from '../../utils/is-function.js'\n\nfunction cacheResult(key, function_) {\n  return function (...arguments_) {\n    const cacheKey = isFunction(key) ? key.call(this, ...arguments_) : key\n    const {$store: store} = this\n    if (hasOwn(store, cacheKey)) {\n      return store[cacheKey]\n    }\n    const result = function_.call(this, ...arguments_)\n    store[cacheKey] = result\n\n    return result\n  }\n}\n\nexport default cacheResult\n","import textToDocument from '../../utils/text-to-document.js'\nimport cacheResult from '../helper/cache-result.js'\n\nimport {DOMPARSER_TYPES} from '../../constants.js'\n\nfunction cacheKey(type) {\n  return `document[${type}]`\n}\n\nfunction parseDocumentWithType(type) {\n  return cacheResult(cacheKey(type), async function document() {\n    const text = await this.text()\n    return textToDocument(text, type)\n  })\n}\n\nfunction document(type) {\n  type = type || this.$store.blob.type\n  return parseDocumentWithType(type).call(this)\n}\n\nconst xml = parseDocumentWithType(DOMPARSER_TYPES.xml)\nconst svg = parseDocumentWithType(DOMPARSER_TYPES.svg)\nconst html = parseDocumentWithType(DOMPARSER_TYPES.html)\n\nexport {document, xml, svg, html}\n","var r=new Function(\"return this\")(),e=r.FileReader,t=r.Promise,a=r.Blob;function n(r){return function(a,n){return new t((function(t,o){var i=new e;i.onload=function(){return t(i.result)},i.onerror=function(){return o(i.error)},r.call(i,a,n)}))}}var o,i=a.prototype.arrayBuffer?(o=a.prototype.arrayBuffer,function(r,e){return o.call(r,e)}):n(e.prototype.readAsArrayBuffer),u=String.fromCharCode;function f(r){for(var e=new Uint8Array(r),t=e.byteLength,a=\"\",n=0;n<t;n+=1)a+=u(e[n]);return a}var s=e.prototype.readAsBinaryString?n(e.prototype.readAsBinaryString):function(r){return i(r).then(f)},y=n(e.prototype.readAsDataURL),p=n(e.prototype.readAsText),d=Object.freeze({__proto__:null,readAsArrayBuffer:i,readAsBinaryString:s,readAsDataURL:y,readAsText:p}),A=Object.freeze({__proto__:null,readAsArrayBuffer:i,readAsBinaryString:s,readAsDataURL:y,readAsText:p,arrayBuffer:i,binaryString:s,dataURL:y,text:p}),c=function(){};Object.assign(c.prototype,d),Object.assign(c,A);export default c;export{i as arrayBuffer,s as binaryString,y as dataURL,i as readAsArrayBuffer,s as readAsBinaryString,y as readAsDataURL,p as readAsText,p as text};\n//# sourceMappingURL=index.min.mjs.map\n","import {\n  readAsArrayBuffer,\n  readAsText,\n  readAsDataURL,\n  readAsBinaryString,\n} from 'promisify-file-reader'\n\nimport cacheResult from '../helper/cache-result.js'\n\nimport {DEFAULT_TEXT_ENCODING} from '../../constants.js'\n\nconst methods = {\n  arrayBuffer: readAsArrayBuffer,\n  text: readAsText,\n  dataURL: readAsDataURL,\n  binaryString: readAsBinaryString,\n}\n\nfunction readAs(dataType) {\n  const method = methods[dataType]\n\n  function cacheKey(encoding) {\n    if (dataType !== 'text') {\n      return dataType\n    }\n\n    encoding = String(\n      encoding || this.$options.encoding || DEFAULT_TEXT_ENCODING\n    ).toUpperCase()\n\n    return `${dataType}[${encoding}]`\n  }\n\n  function readAs(...arguments_) {\n    return method(this.$store.blob, ...arguments_)\n  }\n\n  return cacheResult(cacheKey, readAs)\n}\n\nconst arrayBuffer = readAs('arrayBuffer')\nconst text = readAs('text')\nconst dataURL = readAs('dataURL')\nconst binaryString = readAs('binaryString')\n\nexport {arrayBuffer, text, dataURL, binaryString}\n","import constructFile from '../../utils/construct-file.js'\nimport toPromise from '../../utils/async.js'\n\n// get `File`\nfunction fileSync(name, options = '') {\n  const {blob} = this.$store\n  name = name || blob.name\n  options = {\n    ...blob,\n    ...options,\n  }\n\n  return constructFile([blob], name, options)\n}\n\nconst file = toPromise(fileSync)\n\nexport {fileSync, file}\n","import {createImageBitmap} from '../../utils/global-this.js'\nimport cacheResult from '../helper/cache-result.js'\n\n// get `ImageBitmap`\nconst imageBitmap = cacheResult(\n  'imageBitmap',\n  function imageBitmap(...arguments_) {\n    return createImageBitmap(this.$store.blob, ...arguments_)\n  }\n)\n\nexport {imageBitmap}\n","import {SUPPORTS_OFFSCREEN_CANVAS} from '../supports.js'\n\nimport {document, OffscreenCanvas} from './global-this.js'\n\nfunction getOffscreenCanvasRenderingContext2D(width, height) {\n  const canvas = new OffscreenCanvas(width, height)\n  return canvas.getContext('2d')\n}\nfunction getCanvasRenderingContext2D(width, height) {\n  const canvas = document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n  return canvas.getContext('2d')\n}\n\nexport default SUPPORTS_OFFSCREEN_CANVAS\n  ? getOffscreenCanvasRenderingContext2D\n  : getCanvasRenderingContext2D\n","import getRenderingContext2D from './get-rendering-context.js'\n\nfunction drawImage(image) {\n  const context = getRenderingContext2D(\n    image.naturalWidth || image.width,\n    image.naturalHeight || image.height\n  )\n  context.drawImage(image, 0, 0)\n  return context\n}\n\nexport default drawImage\n","import drawImage from './draw-image.js'\n\nfunction getImageData(\n  image,\n  sx = 0,\n  sy = 0,\n  sw = image.naturalWidth || image.width,\n  sh = image.naturalHeight || image.height\n) {\n  const context = drawImage(image)\n\n  return context.getImageData(sx, sy, sw, sh)\n}\n\nexport default getImageData\n","import getImageData from '../../utils/get-image-data.js'\nimport cacheResult from '../helper/cache-result.js'\n\n// get `ImageBitmap`\nconst imageData = cacheResult(\n  'imageData',\n  async function imageData(...arguments_) {\n    const image = await this.image()\n    return getImageData(image, ...arguments_)\n  }\n)\n\nexport {imageData}\n","function isUndefined(x) {\n  return typeof x === 'undefined'\n}\n\nexport default isUndefined\n","import isUndefined from './is-undefined.js'\n\nfunction promisify(function_) {\n  function promised(...arguments_) {\n    return new Promise((resolve, reject) => {\n      const result = function_.call(this, resolve, reject, ...arguments_)\n\n      if (!isUndefined(result)) {\n        resolve(result)\n      }\n    })\n  }\n\n  return promised\n}\n\nexport default promisify\n","function on(object, type, listener, options = false) {\n  object.addEventListener(type, listener, options)\n}\n\nexport default on\n","import {IMAGE_LOAD_ERROR} from '../constants.js'\nimport promisify from './promisify.js'\nimport on from './on.js'\n\nfunction waitForImage(resolve, reject, image) {\n  if (image.naturalWidth) {\n    resolve(image)\n    return\n  }\n\n  on(image, 'load', function () {\n    resolve(image)\n  })\n\n  on(image, 'error', function () {\n    reject(new Error(IMAGE_LOAD_ERROR))\n  })\n}\n\nexport default promisify(waitForImage)\n","import {Image} from './global-this.js'\nimport waitForImage from './wait-for-image.js'\n\n// load as a `HTMLImageElement`\nfunction loadImage(url) {\n  const image = new Image()\n  image.src = url\n  return waitForImage(image)\n}\n\nexport default loadImage\n","import loadImage from '../../utils/load-image.js'\nimport {SUPPORTS_URL_CREATE_OBJECT_URL} from '../../supports.js'\nimport cacheResult from '../helper/cache-result.js'\n\nconst image = cacheResult('image', async function image() {\n  const url = await this[SUPPORTS_URL_CREATE_OBJECT_URL ? 'url' : 'dataURL']()\n\n  return loadImage(url)\n})\n\nexport {image}\n","async function json(encoding, reviver) {\n  const text = await this.text(encoding || this.$options.encoding)\n  return JSON.parse(text, reviver)\n}\n\nexport {json}\n","import globalThis from '../../utils/global-this.js'\nimport cacheResult from '../helper/cache-result.js'\n\nfunction getView(type) {\n  const TypedArray = globalThis[type[0].toUpperCase() + type.slice(1)]\n  async function arrayBufferView(byteOffset, length) {\n    const buffer = await this.arrayBuffer()\n    return new TypedArray(buffer, byteOffset, length)\n  }\n\n  return cacheResult(type, arrayBufferView)\n}\n\nconst dataView = getView('dataView')\nconst float32Array = getView('float32Array')\nconst float64Array = getView('float64Array')\nconst int16Array = getView('int16Array')\nconst int32Array = getView('int32Array')\nconst int8Array = getView('int8Array')\nconst uint16Array = getView('uint16Array')\nconst uint32Array = getView('uint32Array')\nconst uint8Array = getView('uint8Array')\nconst uint8ClampedArray = getView('uint8ClampedArray')\n\nexport {\n  dataView,\n  float32Array,\n  float64Array,\n  int16Array,\n  int32Array,\n  int8Array,\n  uint16Array,\n  uint32Array,\n  uint8Array,\n  uint8ClampedArray,\n}\n","import {URL} from '../../utils/global-this.js'\nimport toPromise from '../../utils/async.js'\nimport cacheResult from '../helper/cache-result.js'\n\n// get `URL`\nconst urlSync = cacheResult('url', function url() {\n  return URL.createObjectURL(this.$store.blob)\n})\n\nconst url = toPromise(urlSync)\n\nexport {url, urlSync}\n","import {Blob} from '../utils/global-this.js'\nimport defineValues from '../utils/define-values.js'\nimport constructFile from '../utils/construct-file.js'\nimport isBlob from '../utils/is-blob.js'\nimport {CONSTRUCTOR_DATA_TYPE_ERROR} from '../constants.js'\nimport * as prototype from './prototype/index.js'\n\nclass File {\n  constructor(data, options = {}) {\n    if (!isBlob(data)) {\n      throw new TypeError(`${CONSTRUCTOR_DATA_TYPE_ERROR}, got ${typeof data}`)\n    }\n\n    let blob = data\n    const {\n      type = blob.type,\n      name = blob.name,\n      lastModified = blob.lastModified,\n    } = options\n\n    if (\n      type !== blob.type ||\n      name !== blob.name ||\n      lastModified !== blob.lastModified\n    ) {\n      if (name) {\n        blob = constructFile([data], name, {\n          type,\n          lastModified,\n        })\n      } else {\n        blob = new Blob([data], {\n          type,\n        })\n      }\n    }\n\n    this.$store = {\n      original: data,\n      blob,\n    }\n    this.$options = options\n  }\n}\n\ndefineValues(File.prototype, prototype)\n\nexport default File\n","import isObject from './is-object.js'\nimport isFunction from './is-function.js'\n\nfunction isThenAble(x) {\n  return isObject(x) && isFunction(x.then)\n}\n\nexport default isThenAble\n","import {XHR_RESPONSE_TYPES} from '../constants.js'\n\nfunction parseXHRData(xhr) {\n  switch (xhr.responseType) {\n    case XHR_RESPONSE_TYPES.none:\n    case XHR_RESPONSE_TYPES.text:\n      return xhr.responseText\n    case XHR_RESPONSE_TYPES.json:\n      return JSON.stringify(xhr.response)\n    case XHR_RESPONSE_TYPES.document:\n      return xhr.responseXML\n    default:\n      return xhr.response\n  }\n}\n\nexport default parseXHRData\n","import {XMLHTTP_TIMEOUT_ERROR, XMLHTTP_LOAD_ERROR} from '../constants.js'\nimport promisify from './promisify.js'\nimport on from './on.js'\nimport parseXHRData from './parse-xmlhttp-request-data.js'\n\nfunction waitForXMLHttpRequest(resolve, reject, xhr) {\n  if (xhr.readyState === 4) {\n    resolve(parseXHRData(xhr))\n    return\n  }\n\n  on(xhr, 'load', function () {\n    resolve(parseXHRData(xhr))\n  })\n  on(xhr, 'error', function () {\n    reject(new Error(XMLHTTP_LOAD_ERROR))\n  })\n  on(xhr, 'timeout', function () {\n    reject(new Error(XMLHTTP_TIMEOUT_ERROR))\n  })\n}\n\nexport default promisify(waitForXMLHttpRequest)\n","import promisify from './promisify.js'\nimport on from './on.js'\n\nfunction waitForFileReader(resolve, reject, fileReader) {\n  if (fileReader.result) {\n    resolve(fileReader.result)\n    return\n  }\n\n  if (fileReader.error) {\n    reject(fileReader.error)\n    return\n  }\n\n  on(fileReader, 'load', function () {\n    resolve(fileReader.result)\n  })\n\n  on(fileReader, 'error', function () {\n    reject(fileReader.error)\n  })\n}\n\nexport default promisify(waitForFileReader)\n","import getRenderingContext2D from './get-rendering-context.js'\n\nfunction putImageData(data) {\n  const context = getRenderingContext2D(data.width, data.height)\n  context.putImageData(data, 0, 0)\n  return context\n}\n\nexport default putImageData\n","import isObject from './is-object.js'\nimport isFunction from './is-function.js'\n\n// whatwg-fetch polyfilled fetch Symbol.toString is not current\nfunction isBody(x) {\n  return (\n    isObject(x) &&\n    isFunction(x.arrayBuffer) &&\n    isFunction(x.blob) &&\n    isFunction(x.formData) &&\n    isFunction(x.json) &&\n    isFunction(x.text)\n  )\n}\n\nexport default isBody\n","import isObject from './is-object.js'\nimport isFunction from './is-function.js'\n\nfunction isDocument(x) {\n  return (\n    isObject(x) && isObject(x.documentElement) && isFunction(x.createElement)\n  )\n}\n\nexport default isDocument\n","import {XMLSerializer} from './global-this.js'\n\nfunction documentToText(document) {\n  return (\n    document.documentElement.outerHTML ||\n    new XMLSerializer().serializeToString(document)\n  )\n}\n\nexport default documentToText\n","import {atob, Uint8Array, Blob} from './global-this.js'\n\nfunction dataURLToBlob(data, type) {\n  const binary = atob(data.split(',')[1])\n  const array = Uint8Array.from(binary, (byte) => byte.charCodeAt(0))\n\n  return new Blob([array], {\n    type,\n  })\n}\n\nexport default dataURLToBlob\n","import promisify from './promisify.js'\nimport parseBase64DataURL from './data-url-to-blob.js'\n\nfunction canvasToBlob(resolve, reject, canvas, type, quality) {\n  if (canvas.toBlob) {\n    return canvas.toBlob(resolve, type, quality)\n  }\n\n  if (canvas.convertToBlob) {\n    return resolve(canvas.convertToBlob(type, quality))\n  }\n\n  const url = canvas.toDataURL(type, quality)\n  const blob = parseBase64DataURL(url)\n  return resolve(blob)\n}\n\nexport default promisify(canvasToBlob)\n","import isObject from './is-object.js'\nimport isFunction from './is-function.js'\n\nfunction isCanvas(x) {\n  return isObject(x) && isFunction(x.getContext)\n}\n\nexport default isCanvas\n","import isObject from './is-object.js'\nimport isCanvas from './is-canvas.js'\n\nfunction isRenderingContext(x) {\n  return isObject(x) && isCanvas(x.canvas)\n}\n\nexport default isRenderingContext\n","const base64DataURLPattern = /^data:.*?;base64,/\n\nfunction isDataURL(url) {\n  return base64DataURLPattern.test(url)\n}\n\nexport default isDataURL\n","import {fetch} from './global-this.js'\n\nexport default fetch\n","import isObject from './is-object.js'\nimport getType from './get-type.js'\n\nfunction isArrayBuffer(x) {\n  return isObject(x) && getType(x) === 'ArrayBuffer'\n}\n\nexport default isArrayBuffer\n","import isArrayBuffer from './is-array-buffer.js'\nimport isObject from './is-object.js'\n\n// ie DataView.toString is [object Object]\nfunction isDataView(x) {\n  // can't do ArrayBuffer.isView check on ie 10\n  return isObject(x) && isArrayBuffer(x.buffer)\n}\n\nexport default isDataView\n","import {Blob} from '../utils/global-this.js'\nimport isThenAble from '../utils/is-then-able.js'\nimport getType from '../utils/get-type.js'\nimport waitForXMLHttpRequest from '../utils/wait-for-xmlhttp-request.js'\nimport waitForImage from '../utils/wait-for-image.js'\nimport waitForFileReader from '../utils/wait-for-file-reader.js'\nimport drawImage from '../utils/draw-image.js'\nimport putImageData from '../utils/put-image-data.js'\nimport isBody from '../utils/is-body.js'\nimport isDocument from '../utils/is-document.js'\nimport documentToText from '../utils/document-to-text.js'\nimport canvasToBlob from '../utils/canvas-to-blob.js'\nimport isRenderingContext from '../utils/is-rendering-context.js'\nimport isDataURL from '../utils/is-data-url.js'\nimport dataURLToBlob from '../utils/data-url-to-blob.js'\nimport download from '../utils/download.js'\nimport {SUPPORTS_BLOB_CONSTRUCTOR_WITH_DATA_VIEW} from '../supports.js'\nimport isDataView from '../utils/is-data-view.js'\nimport File from './file.js'\n\nfunction parseFromData(data, options) {\n  const parse = (data) => parseFromData(data, options)\n\n  // Promise\n  if (isThenAble(data)) {\n    return data.then(parse)\n  }\n\n  const type = getType(data)\n\n  if (type === 'Blob' || type === 'File') {\n    return data\n  }\n\n  if (type === 'XMLHttpRequest') {\n    return waitForXMLHttpRequest(data).then(parse)\n  }\n\n  if (type === 'HTMLImageElement') {\n    return waitForImage(data).then(drawImage).then(parse)\n  }\n\n  if (type === 'ImageBitmap') {\n    return parse(drawImage(data))\n  }\n\n  if (type === 'ImageData') {\n    return parse(putImageData(data))\n  }\n\n  if (type === 'FileReader') {\n    return waitForFileReader(data).then(parse)\n  }\n\n  if (isBody(data)) {\n    return data.blob()\n  }\n\n  if (isDocument(data)) {\n    return parse(documentToText(data))\n  }\n\n  // HTMLCanvasElement\n  if (type === 'HTMLCanvasElement') {\n    return canvasToBlob(data, options.type, options.quality)\n  }\n\n  // OffscreenCanvas\n  if (type === 'OffscreenCanvas') {\n    return data.convertToBlob(options)\n  }\n\n  // RenderingContext\n  if (isRenderingContext(data)) {\n    return parse(data.canvas)\n  }\n\n  if (isDataURL(data)) {\n    try {\n      const blob = dataURLToBlob(data)\n      if (blob) {\n        return blob\n      }\n    } catch {}\n  }\n\n  if (/^(?:blob|data):/.test(data)) {\n    return download(data).then(parse)\n  }\n\n  if (!SUPPORTS_BLOB_CONSTRUCTOR_WITH_DATA_VIEW && isDataView(data)) {\n    return parse(data.buffer)\n  }\n\n  // if (type === 'ArrayBuffer' || ArrayBuffer.isView(data)) {\n  //   return new Blob([data])\n  // }\n\n  return new Blob([data], options)\n}\n\nfunction parseData(data, options = {}) {\n  const blob = parseFromData(data, options)\n  const promise = isThenAble(blob) ? blob : Promise.resolve(blob)\n  return promise.then((blob) => new File(blob, options))\n}\n\nexport default parseData\n","import defineValues from './utils/define-values.js'\n\nimport File from './core/file.js'\nimport from from './core/from.js'\n\ndefineValues(File, {\n  from,\n})\n\nexport default File\nexport {from}\n"],"names":["defineProperties","Object","defineValues","object","values","options","configurable","writable","enumerable","properties","keys","key","value","globalThis","Function","URL","webkitURL","ArrayBuffer","atob","Blob","createImageBitmap","DataView","DOMParser","document","fetch","File","Image","OffscreenCanvas","Promise","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","XMLSerializer","isFunction","x","isObject","SUPPORTS_FILE_CONSTRUCTOR","file","SUPPORTS_OFFSCREEN_CANVAS","SUPPORTS_BLOB_CONSTRUCTOR_WITH_DATA_VIEW","arrayBuffer","dataView","blob","SUPPORTS_URL_CREATE_OBJECT_URL","createObjectURL","toFile","parts","fileName","toBlob","name","lastModified","Date","now","toString","prototype","getType","call","slice","isBlob","type","DOMPARSER_TYPES","xml","svg","html","XHR_RESPONSE_TYPES","none","text","json","DEFAULT_TEXT_ENCODING","IMAGE_LOAD_ERROR","XMLHTTP_TIMEOUT_ERROR","XMLHTTP_LOAD_ERROR","CONSTRUCTOR_DATA_TYPE_ERROR","f","args","i","arguments","length","resolve","apply","e","reject","toPromise","function_","arguments_","blobSync","$store","throwParserError","parserError","getElementsByTagName","Error","innerText","textContent","textToDocument","mimeType","parser","parseFromString","isNull","hasOwnProperty","hasOwn","cacheResult","cacheKey","store","result","then","direct","parseDocumentWithType","FileReader","methods","readAsArrayBuffer","readAsText","dataURL","readAsDataURL","binaryString","readAsBinaryString","readAs","dataType","method","encoding","String","$options","toUpperCase","fileSync","constructFile","imageBitmap","getOffscreenCanvasRenderingContext2D","width","height","canvas","getContext","getCanvasRenderingContext2D","createElement","drawImage","image","context","getRenderingContext2D","naturalWidth","naturalHeight","getImageData","sx","sy","sw","sh","_await","imageData","isUndefined","promisify","promised","on","listener","addEventListener","waitForImage","loadImage","url","src","reviver","JSON","parse","getView","arrayBufferView","byteOffset","buffer","TypedArray","float32Array","float64Array","int16Array","int32Array","int8Array","uint16Array","uint32Array","uint8Array","uint8ClampedArray","urlSync","data","TypeError","original","isThenAble","parseXHRData","xhr","responseType","responseText","stringify","response","responseXML","waitForXMLHttpRequest","readyState","waitForFileReader","fileReader","error","putImageData","isBody","formData","isDocument","documentElement","documentToText","outerHTML","serializeToString","dataURLToBlob","binary","split","array","from","byte","charCodeAt","canvasToBlob","quality","convertToBlob","toDataURL","parseBase64DataURL","isCanvas","isRenderingContext","base64DataURLPattern","isDataURL","test","isArrayBuffer","isDataView","parseFromData","download","parseData","promise"],"mappings":"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"}