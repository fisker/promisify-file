!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((r="undefined"!=typeof globalThis?globalThis:r||self).PromisifyFile={})}(this,(function(r){"use strict";function t(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function e(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?t(Object(n),!0).forEach((function(t){a(r,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}function n(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function a(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var o=Object.defineProperties;function i(r,t,n){for(var a=e({configurable:!0,writable:!0,enumerable:!0},n),i=a.configurable,u=a.writable,c=a.enumerable,f={},l=0,s=Object.keys(t);l<s.length;l++){var y=s[l];f[y]={value:t[y],configurable:i,writable:u,enumerable:c}}return o(r,f)}var u=new Function("return this")(),c=u.URL||u.webkitURL,f=u.ArrayBuffer,l=u.atob,s=u.Blob,y=u.createImageBitmap,p=u.DataView,v=u.DOMParser,h=u.document,d=u.fetch,b=u.File,g=u.Image,m=u.OffscreenCanvas;u.Promise,u.Int8Array;var w=u.Uint8Array;u.Uint8ClampedArray,u.Int16Array,u.Uint16Array,u.Int32Array,u.Uint32Array,u.Float32Array,u.Float64Array;var A=u.XMLSerializer;function O(r){return"function"==typeof r}function j(r){return null!==r&&("object"==typeof r||O(r))}var B=function(){try{return j(new b([],""))}catch(r){return!1}}(),P=O(m),x=function(){try{var r=new f,t=new p(r);return j(new s([t]))}catch(r){return!1}}(),L=j(c)&&O(c.createObjectURL);var S=B?function(r,t,e){return new b(r,t,e)}:function(r,t,e){var n=new s(r,e);return n.name=t,n.lastModified=e.lastModified||Date.now(),n},U=Object.prototype.toString;function T(r){return U.call(r).slice(8,-1)}function R(r){var t=T(r);return"Blob"===t||"File"===t}var D="application/xml",C="image/svg+xml",E="text/html",M="",_="text",F="json",I="document",$="`data` except a `Blob`";function H(r){return function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(r.apply(this,t))}catch(r){return Promise.reject(r)}}}((function(){for(var t=this,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return r.call.apply(r,[t].concat(n))}))}function z(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.$store.blob;return r=e(e({},t),r),new s([t],r)}var X=H(z);function q(r,t){var e=(new v).parseFromString(r,t);return function(r){var t=r.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.innerText||t.textContent)}(e),e}var k=Object.prototype.hasOwnProperty;function N(r,t){return!(null===r)&&k.call(r,t)}function V(r,t){return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=O(r)?r.call.apply(r,[this].concat(n)):r,i=this.$store;if(N(i,o))return i[o];var u=t.call.apply(t,[this].concat(n));return i[o]=u,u}}function W(r){return V(function(r){return"document[".concat(r,"]")}(r),(function(){try{return t=this.text(),e=function(t){return q(t,r)},n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}catch(r){return Promise.reject(r)}var t,e,n}))}var J=W(D),G=W(C),K=W(E),Q=new Function("return this")(),Y=Q.FileReader,Z=Q.Promise,rr=Q.Blob;function tr(r){return function(t,e){return new Z((function(n,a){var o=new Y;o.onload=function(){return n(o.result)},o.onerror=function(){return a(o.error)},r.call(o,t,e)}))}}var er,nr=rr.prototype.arrayBuffer?(er=rr.prototype.arrayBuffer,function(r,t){return er.call(r,t)}):tr(Y.prototype.readAsArrayBuffer),ar=String.fromCharCode;function or(r){for(var t=new Uint8Array(r),e=t.byteLength,n="",a=0;a<e;a+=1)n+=ar(t[a]);return n}var ir=Y.prototype.readAsBinaryString?tr(Y.prototype.readAsBinaryString):function(r){return nr(r).then(or)},ur=tr(Y.prototype.readAsDataURL),cr=tr(Y.prototype.readAsText),fr=Object.freeze({__proto__:null,readAsArrayBuffer:nr,readAsBinaryString:ir,readAsDataURL:ur,readAsText:cr}),lr=Object.freeze({__proto__:null,readAsArrayBuffer:nr,readAsBinaryString:ir,readAsDataURL:ur,readAsText:cr,arrayBuffer:nr,binaryString:ir,dataURL:ur,text:cr}),sr=function(){};Object.assign(sr.prototype,fr),Object.assign(sr,lr);var yr={arrayBuffer:nr,text:cr,dataURL:ur,binaryString:ir};function pr(r){var t=yr[r];return V((function(t){return"text"!==r?r:(t=String(t||this.$options.encoding||"UTF-8").toUpperCase(),"".concat(r,"[").concat(t,"]"))}),(function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t.apply(void 0,[this.$store.blob].concat(e))}))}var vr=pr("arrayBuffer"),hr=pr("text"),dr=pr("dataURL"),br=pr("binaryString");function gr(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.$store.blob;return r=r||n.name,t=e(e({},n),t),S([n],r,t)}var mr=H(gr),wr=V("imageBitmap",(function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return y.apply(void 0,[this.$store.blob].concat(t))}));var Ar=P?function(r,t){return new m(r,t).getContext("2d")}:function(r,t){var e=h.createElement("canvas");return e.width=r,e.height=t,e.getContext("2d")};function Or(r){var t=Ar(r.naturalWidth||r.width,r.naturalHeight||r.height);return t.drawImage(r,0,0),t}function jr(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.naturalWidth||r.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.naturalHeight||r.height,o=Or(r);return o.getImageData(t,e,n,a)}function Br(r,t,e){return e?t?t(r):r:(r&&r.then||(r=Promise.resolve(r)),t?r.then(t):r)}var Pr=V("imageData",(function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];try{var n=this;return Br(n.image(),(function(r){return jr.apply(void 0,[r].concat(t))}))}catch(r){return Promise.reject(r)}}));function xr(r){return void 0===r}function Lr(r){return function(){for(var t=this,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return new Promise((function(e,a){var o=r.call.apply(r,[t,e,a].concat(n));xr(o)||e(o)}))}}function Sr(r,t,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r.addEventListener(t,e,n)}var Ur=Lr((function(r,t,e){e.naturalWidth?r(e):(Sr(e,"load",(function(){r(e)})),Sr(e,"error",(function(){t(new Error("error occurred during loading image"))})))}));function Tr(r){var t=new g;return t.src=r,Ur(t)}var Rr=V("image",(function(){try{return r=this[L?"url":"dataURL"](),t=Tr,e?t?t(r):r:(r&&r.then||(r=Promise.resolve(r)),t?r.then(t):r)}catch(r){return Promise.reject(r)}var r,t,e}));var Dr=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(r.apply(this,t))}catch(r){return Promise.reject(r)}}}((function(r,t){var e,n,a;return e=this.text(r||this.$options.encoding),n=function(r){return JSON.parse(r,t)},a?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e)}));function Cr(r){var t=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(r.apply(this,t))}catch(r){return Promise.reject(r)}}}((function(r,t){var n,a,o;return n=this.arrayBuffer(),a=function(n){return new e(n,r,t)},o?a?a(n):n:(n&&n.then||(n=Promise.resolve(n)),a?n.then(a):n)})),e=u[r[0].toUpperCase()+r.slice(1)];return V(r,t)}var Er=Cr("dataView"),Mr=Cr("float32Array"),_r=Cr("float64Array"),Fr=Cr("int16Array"),Ir=Cr("int32Array"),$r=Cr("int8Array"),Hr=Cr("uint16Array"),zr=Cr("uint32Array"),Xr=Cr("uint8Array"),qr=Cr("uint8ClampedArray"),kr=V("url",(function(){return c.createObjectURL(this.$store.blob)})),Nr=H(kr),Vr=function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,r),!R(t))throw new TypeError("".concat($,", got ").concat(typeof t));var a=t,o=e.type,i=void 0===o?a.type:o,u=e.name,c=void 0===u?a.name:u,f=e.lastModified,l=void 0===f?a.lastModified:f;i===a.type&&c===a.name&&l===a.lastModified||(a=c?S([t],c,{type:i,lastModified:l}):new s([t],{type:i})),this.$store={original:t,blob:a},this.$options=e};i(Vr.prototype,Object.freeze({__proto__:null,blob:X,blobSync:z,document:function(r){return W(r=r||this.$store.blob.type).call(this)},xml:J,svg:G,html:K,arrayBuffer:vr,text:hr,dataURL:dr,binaryString:br,fileSync:gr,file:mr,imageBitmap:wr,imageData:Pr,image:Rr,json:Dr,dataView:Er,float32Array:Mr,float64Array:_r,int16Array:Fr,int32Array:Ir,int8Array:$r,uint16Array:Hr,uint32Array:zr,uint8Array:Xr,uint8ClampedArray:qr,url:Nr,urlSync:kr}));var Wr=Vr;function Jr(r){return j(r)&&O(r.then)}function Gr(r){switch(r.responseType){case M:case _:return r.responseText;case F:return JSON.stringify(r.response);case I:return r.responseXML;default:return r.response}}var Kr=Lr((function(r,t,e){4!==e.readyState?(Sr(e,"load",(function(){r(Gr(e))})),Sr(e,"error",(function(){t(new Error("error occurred during XMLHttpRequest"))})),Sr(e,"timeout",(function(){t(new Error("XMLHttpRequest timeout"))}))):r(Gr(e))}));var Qr=Lr((function(r,t,e){e.result?r(e.result):e.error?t(e.error):(Sr(e,"load",(function(){r(e.result)})),Sr(e,"error",(function(){t(e.error)})))}));function Yr(r,t){var e=l(r.split(",")[1]),n=w.from(e,(function(r){return r.charCodeAt(0)}));return new s([n],{type:t})}var Zr=Lr((function(r,t,e,n,a){return e.toBlob?e.toBlob(r,n,a):e.convertToBlob?r(e.convertToBlob(n,a)):r(Yr(e.toDataURL(n,a)))}));function rt(r){return j(r)&&function(r){return j(r)&&O(r.getContext)}(r.canvas)}var tt=/^data:.*?;base64,/;var et=d;function nt(r){return j(r)&&function(r){return j(r)&&"ArrayBuffer"===T(r)}(r.buffer)}function at(r,t){var e=function(r){return at(r,t)};if(Jr(r))return r.then(e);var n,a=T(r);if("Blob"===a||"File"===a)return r;if("XMLHttpRequest"===a)return Kr(r).then(e);if("HTMLImageElement"===a)return Ur(r).then(Or).then(e);if("ImageBitmap"===a)return e(Or(r));if("ImageData"===a)return e(function(r){var t=Ar(r.width,r.height);return t.putImageData(r,0,0),t}(r));if("FileReader"===a)return Qr(r).then(e);if(j(n=r)&&O(n.arrayBuffer)&&O(n.blob)&&O(n.formData)&&O(n.json)&&O(n.text))return r.blob();if(function(r){return j(r)&&j(r.documentElement)&&O(r.createElement)}(r))return e(function(r){return r.documentElement.outerHTML||(new A).serializeToString(r)}(r));if("HTMLCanvasElement"===a)return Zr(r,t.type,t.quality);if("OffscreenCanvas"===a)return r.convertToBlob(t);if(rt(r))return e(r.canvas);if(function(r){return tt.test(r)}(r))try{var o=Yr(r);if(o)return o}catch(r){}return/^(?:blob|data):/.test(r)?et(r).then(e):!x&&nt(r)?e(r.buffer):new s([r],t)}function ot(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=at(r,t),n=Jr(e)?e:Promise.resolve(e);return n.then((function(r){return new Wr(r,t)}))}i(Wr,{from:ot}),r.default=Wr,r.from=ot,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
